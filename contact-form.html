<section class="contact-section">
  <div class="green-card">
    <div class="curved-card">
      <p class="sub-heading">Connect with Saasify</p>
      <h2 class="main-heading">Together, letâ€™s take <span style="color: #00c896">the next step</span></h2>

      <form class="contact-form" id="contact-form" onsubmit="submitForm(event)">
        <div class="form-grid">
          <div class="form-group">
            <label for="name">Name <span style="color: red">*</span></label>
            <input type="text" id="name" name="name" required>
          </div>
          <div class="form-group">
            <label for="email">Email ID <span style="color: red">*</span></label>
            <input type="email" id="email" name="email" required>
          </div>
          <div class="form-group">
            <label for="phone">Phone Number <span style="color: red">*</span></label>
            <input type="tel" id="phone" name="phone">
          </div>
          <div class="form-group">
            <label for="company">Company name <span style="color: red">*</span></label>
            <input type="text" id="company" name="company">
          </div>
          <div class="form-group full">
            <label for="message">Queries <span style="color: red">*</span></label>
            <textarea id="message" name="message" rows="2"></textarea>
          </div>
          <button type="submit" class="cta-button">Submit</button>
        </div>
      </form>

      <div id="response-message" style="margin-top:10px;"></div>
    </div>
  </div>
</section>

<script>
async function submitForm(event) {
    event.preventDefault(); // stop default form reload

    const form = document.getElementById("contact-form");
    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }

    const formData = new FormData(form);
    const responseDiv = document.getElementById("response-message");

    try {
        const response = await fetch("/contact.php", {
            method: "POST",
            body: formData
        });
        const text = await response.text();
        responseDiv.textContent = text;

        if (text.toLowerCase().includes("success")) {
            responseDiv.style.color = "green";
            form.reset();
        } else {
            responseDiv.style.color = "red";
        }
    } catch (error) {
        responseDiv.textContent = "Something went wrong. Please try again.";
        responseDiv.style.color = "red";
    }
}
</script>